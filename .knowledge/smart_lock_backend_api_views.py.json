{"is_source_file": true, "format": "Python", "description": "This file defines REST API views for a smart lock management system, including user registration, login, lock control, access permissions, and logs, built with Django REST Framework.", "external_files": ["rest_framework.decorators", "rest_framework", "rest_framework.response", "rest_framework.authtoken.models", "rest_framework_simplejwt.tokens", "rest_framework.permissions", "django.contrib.auth", "django.shortcuts", "django.db.models", "./models", "./serializers"], "external_methods": ["api_view", "permission_classes", "action", "permissions", "status", "generics.CreateAPIView", "APIView", "Response", "Token", "RefreshToken", "IsAuthenticated", "AllowAny", "IsAdminUser", "authenticate", "get_user_model", "get_object_or_404", "Q", "SmartLock.objects.all", "SmartLockSerializer", "SmartLockDetailSerializer", "AccessPermission", "AccessEventLog", "UserSerializer", "UserRegisterSerializer", "AccessPermissionSerializer", "AccessPermissionCreateSerializer", "AccessEventLogSerializer", "get_user_model", "get_object_or_404", "Response", "RefreshToken.for_user", "serializer_class", "permission_classes", "get_serializer_class", "get_queryset", "perform_create", "get_object", "filter", "order_by", "create", "save", "create", "filter", "update", "partial_update"], "published": ["health", "UserRegisterView", "UserLoginView", "UserInfoView", "SmartLockViewSet", "AccessPermissionViewSet", "AccessEventLogViewSet"], "classes": [{"name": "UserRegisterView", "description": "API view for user registration, allowing new users to be created."}, {"name": "UserLoginView", "description": "API view handling user login and JWT token issuance."}, {"name": "UserInfoView", "description": "API view for retrieving info about the currently authenticated user."}, {"name": "SmartLockViewSet", "description": "ViewSet providing CRUD operations and actions (lock, unlock, status, activity logs) for smart locks."}, {"name": "AccessPermissionViewSet", "description": "ViewSet to manage lock access permissions, including creation and updates."}, {"name": "AccessEventLogViewSet", "description": "ViewSet for listing access event logs."}], "methods": [{"name": "health(request)", "description": "Health check endpoint returning server status.", "scope": "", "scopeKind": ""}, {"name": "activity_logs(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "get(self, request)", "scope": "UserInfoView", "scopeKind": "class", "description": "unavailable"}, {"name": "get_queryset(self)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "get_serializer_class(self)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "lock(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "perform_create(self, serializer)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self, request)", "scope": "UserLoginView", "scopeKind": "class", "description": "unavailable"}, {"name": "status(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "unlock(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}], "calls": ["Response", "authenticate", "User.objects.get", "Token", "RefreshToken.for_user", "UserSerializer", "SmartLock.objects.filter", "AccessPermission.objects.get_or_create", "AccessEventLog.objects.create", "AccessEventLog.objects.filter", "AccessEventLogSerializer", "get_object_or_404", "PermissionDenied", "Lock.save", "Log.create"], "search-terms": ["smart lock API", "access control", "user registration", "lock management", "permissions", "activity logs", "JWT authentication", "Django REST Framework"], "state": 2, "file_id": 11, "knowledge_revision": 41, "git_revision": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b", "revision_history": [{"29": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b"}, {"41": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b"}], "ctags": [{"_type": "tag", "name": "AccessEventLogViewSet", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class AccessEventLogViewSet(mixins.ListModelMixin, viewsets.GenericViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AccessPermissionViewSet", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class AccessPermissionViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SmartLockViewSet", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class SmartLockViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^User = get_user_model()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "UserInfoView", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class UserInfoView(APIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserLoginView", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class UserLoginView(APIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserRegisterView", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class UserRegisterView(generics.CreateAPIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "activity_logs", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def activity_logs(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "UserInfoView", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_serializer_class(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_serializer_class(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "lock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def lock(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "perform_create", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def perform_create(self, serializer):$/", "language": "Python", "kind": "member", "signature": "(self, serializer)", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "perform_create", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def perform_create(self, serializer):$/", "language": "Python", "kind": "member", "signature": "(self, serializer)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [AllowAny]$/", "language": "Python", "kind": "variable", "scope": "UserLoginView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [AllowAny]$/", "language": "Python", "kind": "variable", "scope": "UserRegisterView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "UserInfoView", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def post(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "UserLoginView", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    queryset = AccessEventLog.objects.all().select_related(\"user\", \"smart_lock\")$/", "language": "Python", "kind": "variable", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    queryset = AccessPermission.objects.all().select_related(\"user\", \"smart_lock\")$/", "language": "Python", "kind": "variable", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    queryset = SmartLock.objects.all().order_by(\"-created_at\")$/", "language": "Python", "kind": "variable", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = AccessEventLogSerializer$/", "language": "Python", "kind": "variable", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = AccessPermissionSerializer$/", "language": "Python", "kind": "variable", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = SmartLockSerializer$/", "language": "Python", "kind": "variable", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = UserRegisterSerializer$/", "language": "Python", "kind": "variable", "scope": "UserRegisterView", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def status(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "unlock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def unlock(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}], "hash": "184adda138ebce6b8c9f9093682b7878", "format-version": 4, "code-base-name": "smart_lock_backend", "filename": "smart_lock_backend/api/views.py", "fields": [{"name": "User = get_user_model()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "permission_classes = [AllowAny]", "scope": "UserLoginView", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [IsAuthenticated]", "scope": "AccessEventLogViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = AccessEventLog.objects.all().select_related(\"user\", \"smart_lock\")", "scope": "AccessEventLogViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = AccessPermission.objects.all().select_related(\"user\", \"smart_lock\")", "scope": "AccessPermissionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = SmartLock.objects.all().order_by(\"-created_at\")", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = AccessEventLogSerializer", "scope": "AccessEventLogViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = AccessPermissionSerializer", "scope": "AccessPermissionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = SmartLockSerializer", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = UserRegisterSerializer", "scope": "UserRegisterView", "scopeKind": "class", "description": "unavailable"}]}