{"is_source_file": true, "format": "Python", "description": "This file defines REST API views for the smart lock management system, handling user registration, login, lock control (lock, unlock, status), permissions, and event logs. It uses Django REST Framework and related libraries to implement various API endpoints and viewsets.", "external_files": ["rest_framework.decorators", "rest_framework", "rest_framework_simplejwt.tokens", "rest_framework.permissions", "django.contrib.auth", "django.db.models", "./models", "./serializers"], "external_methods": ["api_view", "action", "CreateAPIView", "APIView", "Response", "RefreshToken.for_user", "authenticate", "get_user_model", "Q", "get_user_model", "SmartLock.objects.all", "AccessPermission.objects.get_or_create", "AccessEventLog.objects.create", "AccessPermission.objects.filter", "AccessEventLog.objects.filter", "AccessEventLogSerializer"], "published": ["health", "UserRegisterView", "UserLoginView", "UserInfoView", "SmartLockViewSet", "AccessPermissionViewSet", "AccessEventLogViewSet"], "classes": [{"name": "UserRegisterView", "description": "API view for user registration, allowing new users to register."}, {"name": "UserLoginView", "description": "API view handling user login, generating JWT tokens upon successful authentication."}, {"name": "UserInfoView", "description": "API view to retrieve current authenticated user's information."}, {"name": "SmartLockViewSet", "description": "ViewSet providing CRUD operations and actions for smart lock management, including lock/unlock/status/logs."}, {"name": "AccessPermissionViewSet", "description": "ViewSet managing access permissions for smart locks, with create/update functionalities."}, {"name": "AccessEventLogViewSet", "description": "Read-only view for listing access event logs, filtered based on user permissions."}], "methods": [{"name": "health(request)", "description": "Health check endpoint returning server status.", "scope": "", "scopeKind": ""}, {"name": "activity_logs(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "get(self, request)", "scope": "UserInfoView", "scopeKind": "class", "description": "unavailable"}, {"name": "get_queryset(self)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "get_serializer_class(self)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "lock(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "perform_create(self, serializer)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "post(self, request)", "scope": "UserLoginView", "scopeKind": "class", "description": "unavailable"}, {"name": "status(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "unlock(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}], "calls": ["Response", "authenticate", "RefreshToken.for_user", "UserSerializer", "SmartLock.objects.all", "AccessPermission.objects.get_or_create", "AccessEventLog.objects.create", "AccessPermission.objects.filter", "AccessEventLog.objects.filter", "AccessEventLogSerializer"], "search-terms": ["smart lock", "access permission", "lock status", "event logs", "API views", "JWT authentication", "user registration", "user login"], "state": 2, "file_id": 11, "knowledge_revision": 48, "git_revision": "707ca6180cc8536445769ae1a7342da850ff42d8", "revision_history": [{"29": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b"}, {"41": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b"}, {"48": "707ca6180cc8536445769ae1a7342da850ff42d8"}], "ctags": [{"_type": "tag", "name": "AccessEventLogViewSet", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class AccessEventLogViewSet(mixins.ListModelMixin, viewsets.GenericViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AccessPermissionViewSet", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class AccessPermissionViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SmartLockViewSet", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class SmartLockViewSet(viewsets.ModelViewSet):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^User = get_user_model()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "UserInfoView", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class UserInfoView(APIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserLoginView", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class UserLoginView(APIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserRegisterView", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^class UserRegisterView(generics.CreateAPIView):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "activity_logs", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def activity_logs(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "UserInfoView", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_queryset(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_serializer_class(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "get_serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def get_serializer_class(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "lock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def lock(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "perform_create", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def perform_create(self, serializer):$/", "language": "Python", "kind": "member", "signature": "(self, serializer)", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "perform_create", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def perform_create(self, serializer):$/", "language": "Python", "kind": "member", "signature": "(self, serializer)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [AllowAny]$/", "language": "Python", "kind": "variable", "scope": "UserLoginView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [AllowAny]$/", "language": "Python", "kind": "variable", "scope": "UserRegisterView", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "permission_classes", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    permission_classes = [IsAuthenticated]$/", "language": "Python", "kind": "variable", "scope": "UserInfoView", "scopeKind": "class"}, {"_type": "tag", "name": "post", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def post(self, request):$/", "language": "Python", "kind": "member", "signature": "(self, request)", "scope": "UserLoginView", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    queryset = AccessEventLog.objects.all().select_related(\"user\", \"smart_lock\")$/", "language": "Python", "kind": "variable", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    queryset = AccessPermission.objects.all().select_related(\"user\", \"smart_lock\")$/", "language": "Python", "kind": "variable", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "queryset", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    queryset = SmartLock.objects.all().order_by(\"-created_at\")$/", "language": "Python", "kind": "variable", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = AccessEventLogSerializer$/", "language": "Python", "kind": "variable", "scope": "AccessEventLogViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = AccessPermissionSerializer$/", "language": "Python", "kind": "variable", "scope": "AccessPermissionViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = SmartLockSerializer$/", "language": "Python", "kind": "variable", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "serializer_class", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    serializer_class = UserRegisterSerializer$/", "language": "Python", "kind": "variable", "scope": "UserRegisterView", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def status(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}, {"_type": "tag", "name": "unlock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/views.py", "pattern": "/^    def unlock(self, request, pk=None):$/", "language": "Python", "kind": "member", "signature": "(self, request, pk=None)", "scope": "SmartLockViewSet", "scopeKind": "class"}], "hash": "449a83a0c739ee7526971226dbc2e164", "format-version": 4, "code-base-name": "smart_lock_backend", "filename": "smart_lock_backend/api/views.py", "fields": [{"name": "User = get_user_model()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "permission_classes = [AllowAny]", "scope": "UserLoginView", "scopeKind": "class", "description": "unavailable"}, {"name": "permission_classes = [IsAuthenticated]", "scope": "AccessEventLogViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = AccessEventLog.objects.all().select_related(\"user\", \"smart_lock\")", "scope": "AccessEventLogViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = AccessPermission.objects.all().select_related(\"user\", \"smart_lock\")", "scope": "AccessPermissionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "queryset = SmartLock.objects.all().order_by(\"-created_at\")", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = AccessEventLogSerializer", "scope": "AccessEventLogViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = AccessPermissionSerializer", "scope": "AccessPermissionViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = SmartLockSerializer", "scope": "SmartLockViewSet", "scopeKind": "class", "description": "unavailable"}, {"name": "serializer_class = UserRegisterSerializer", "scope": "UserRegisterView", "scopeKind": "class", "description": "unavailable"}]}