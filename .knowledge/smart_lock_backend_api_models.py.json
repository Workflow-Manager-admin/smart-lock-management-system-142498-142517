{"is_source_file": true, "format": "Python", "description": "This file defines Django models for a smart lock management system, including user, lock, permissions, and event log models.", "external_files": ["django.db.models", "django.contrib.auth.models.AbstractUser", "django.utils.timezone"], "external_methods": ["models.CharField", "models.TextField", "models.BooleanField", "models.ForeignKey", "models.DateTimeField", "models.Model", "AbstractUser", "timezone.now"], "published": ["User", "SmartLock", "AccessPermission", "AccessEventLog"], "classes": [{"name": "User", "description": "Custom user model extending Django's AbstractUser supporting username and email login."}, {"name": "SmartLock", "description": "Model representing a smart lock device with attributes like name, location, status, and owner."}, {"name": "AccessPermission", "description": "Model managing user permissions for each smart lock (lock, unlock, view logs)."}, {"name": "AccessEventLog", "description": "Model logging events such as lock/unlock actions, access denials, and status changes for audit purposes."}], "methods": [{"name": "__str__(self)", "description": "Returns a string representation of the SmartLock instance.", "scope": "SmartLock", "scopeKind": "class"}, {"name": "__str__", "description": "Returns a string describing an AccessEventLog instance with lock name, event type, user, and timestamp."}], "calls": ["models.CharField", "models.TextField", "models.BooleanField", "models.ForeignKey", "models.DateTimeField", "timezone.now"], "search-terms": ["SmartLock model", "AccessPermission management", "AccessEventLog", "Custom User model", "lock status management"], "state": 2, "file_id": 12, "knowledge_revision": 38, "git_revision": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b", "revision_history": [{"27": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b"}, {"38": "3ffbf8cc567c4c41c070e1ef7a9ba65b9d78a59b"}], "ctags": [{"_type": "tag", "name": "AccessEventLog", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^class AccessEventLog(models.Model):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AccessPermission", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^class AccessPermission(models.Model):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "EVENT_CHOICES", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    EVENT_CHOICES = [$/", "language": "Python", "kind": "variable", "scope": "AccessEventLog", "scopeKind": "class"}, {"_type": "tag", "name": "Meta", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    class Meta:$/", "language": "Python", "kind": "class", "scope": "AccessPermission", "scopeKind": "class"}, {"_type": "tag", "name": "SmartLock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^class SmartLock(models.Model):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^class User(AbstractUser):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__str__", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    def __str__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "AccessEventLog", "scopeKind": "class"}, {"_type": "tag", "name": "__str__", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    def __str__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "can_lock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    can_lock = models.BooleanField(default=False)$/", "language": "Python", "kind": "variable", "scope": "AccessPermission", "scopeKind": "class"}, {"_type": "tag", "name": "can_unlock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    can_unlock = models.BooleanField(default=False)$/", "language": "Python", "kind": "variable", "scope": "AccessPermission", "scopeKind": "class"}, {"_type": "tag", "name": "can_view_logs", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    can_view_logs = models.BooleanField(default=False)  # e.g., regular vs admin$/", "language": "Python", "kind": "variable", "scope": "AccessPermission", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    created_at = models.DateTimeField(auto_now_add=True)$/", "language": "Python", "kind": "variable", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    description = models.TextField(blank=True)$/", "language": "Python", "kind": "variable", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "event_type", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    event_type = models.CharField(max_length=32, choices=EVENT_CHOICES)$/", "language": "Python", "kind": "variable", "scope": "AccessEventLog", "scopeKind": "class"}, {"_type": "tag", "name": "granted_at", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    granted_at = models.DateTimeField(auto_now_add=True)$/", "language": "Python", "kind": "variable", "scope": "AccessPermission", "scopeKind": "class"}, {"_type": "tag", "name": "granted_by", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    granted_by = models.ForeignKey(User, null=True, blank=True, on_delete=models.SET_NULL, relat/", "language": "Python", "kind": "variable", "scope": "AccessPermission", "scopeKind": "class"}, {"_type": "tag", "name": "is_online", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    is_online = models.BooleanField(default=True)$/", "language": "Python", "kind": "variable", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "location", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    location = models.CharField(max_length=1024, blank=True)$/", "language": "Python", "kind": "variable", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    message = models.CharField(max_length=256, blank=True)$/", "language": "Python", "kind": "variable", "scope": "AccessEventLog", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    name = models.CharField(max_length=100)$/", "language": "Python", "kind": "variable", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "owner", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    owner = models.ForeignKey(User, related_name=\"owned_locks\", on_delete=models.CASCADE)$/", "language": "Python", "kind": "variable", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "smart_lock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    smart_lock = models.ForeignKey(SmartLock, related_name=\"logs\", on_delete=models.CASCADE)$/", "language": "Python", "kind": "variable", "scope": "AccessEventLog", "scopeKind": "class"}, {"_type": "tag", "name": "smart_lock", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    smart_lock = models.ForeignKey(SmartLock, related_name=\"permissions\", on_delete=models.CASCA/", "language": "Python", "kind": "variable", "scope": "AccessPermission", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    status = models.CharField(max_length=32, default=\"locked\", choices=[(\"locked\", \"Locked\"), (\"/", "language": "Python", "kind": "variable", "scope": "SmartLock", "scopeKind": "class"}, {"_type": "tag", "name": "timestamp", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    timestamp = models.DateTimeField(default=timezone.now)$/", "language": "Python", "kind": "variable", "scope": "AccessEventLog", "scopeKind": "class"}, {"_type": "tag", "name": "unique_together", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^        unique_together = ('user', 'smart_lock')$/", "language": "Python", "kind": "variable", "scope": "AccessPermission.Meta", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    user = models.ForeignKey(User, related_name=\"access_logs\", on_delete=models.SET_NULL, null=T/", "language": "Python", "kind": "variable", "scope": "AccessEventLog", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/smart-lock-management-system-142498-142517/smart_lock_backend/api/models.py", "pattern": "/^    user = models.ForeignKey(User, related_name=\"access_permissions\", on_delete=models.CASCADE)$/", "language": "Python", "kind": "variable", "scope": "AccessPermission", "scopeKind": "class"}], "hash": "bb95969cb8adb1a882052eca364b8e7f", "format-version": 4, "code-base-name": "smart_lock_backend", "filename": "smart_lock_backend/api/models.py", "fields": [{"name": "EVENT_CHOICES = [", "scope": "AccessEventLog", "scopeKind": "class", "description": "unavailable"}, {"name": "can_lock = models.BooleanField(default=False)", "scope": "AccessPermission", "scopeKind": "class", "description": "unavailable"}, {"name": "can_unlock = models.BooleanField(default=False)", "scope": "AccessPermission", "scopeKind": "class", "description": "unavailable"}, {"name": "can_view_logs = models.BooleanField(default=False)  # e.g., regular vs admin", "scope": "AccessPermission", "scopeKind": "class", "description": "unavailable"}, {"name": "created_at = models.DateTimeField(auto_now_add=True)", "scope": "SmartLock", "scopeKind": "class", "description": "unavailable"}, {"name": "description = models.TextField(blank=True)", "scope": "SmartLock", "scopeKind": "class", "description": "unavailable"}, {"name": "event_type = models.CharField(max_length=32, choices=EVENT_CHOICES)", "scope": "AccessEventLog", "scopeKind": "class", "description": "unavailable"}, {"name": "granted_at = models.DateTimeField(auto_now_add=True)", "scope": "AccessPermission", "scopeKind": "class", "description": "unavailable"}, {"name": "granted_by = models.ForeignKey(User, null=True, blank=True, on_delete=models.SET_NULL, relat/", "scope": "AccessPermission", "scopeKind": "class", "description": "unavailable"}, {"name": "is_online = models.BooleanField(default=True)", "scope": "SmartLock", "scopeKind": "class", "description": "unavailable"}, {"name": "location = models.CharField(max_length=1024, blank=True)", "scope": "SmartLock", "scopeKind": "class", "description": "unavailable"}, {"name": "message = models.CharField(max_length=256, blank=True)", "scope": "AccessEventLog", "scopeKind": "class", "description": "unavailable"}, {"name": "name = models.CharField(max_length=100)", "scope": "SmartLock", "scopeKind": "class", "description": "unavailable"}, {"name": "owner = models.ForeignKey(User, related_name=\"owned_locks\", on_delete=models.CASCADE)", "scope": "SmartLock", "scopeKind": "class", "description": "unavailable"}, {"name": "smart_lock = models.ForeignKey(SmartLock, related_name=\"logs\", on_delete=models.CASCADE)", "scope": "AccessEventLog", "scopeKind": "class", "description": "unavailable"}, {"name": "smart_lock = models.ForeignKey(SmartLock, related_name=\"permissions\", on_delete=models.CASCA/", "scope": "AccessPermission", "scopeKind": "class", "description": "unavailable"}, {"name": "status = models.CharField(max_length=32, default=\"locked\", choices=[(\"locked\", \"Locked\"), (\"/", "scope": "SmartLock", "scopeKind": "class", "description": "unavailable"}, {"name": "timestamp = models.DateTimeField(default=timezone.now)", "scope": "AccessEventLog", "scopeKind": "class", "description": "unavailable"}, {"name": "unique_together = ('user', 'smart_lock')", "scope": "AccessPermission.Meta", "scopeKind": "class", "description": "unavailable"}, {"name": "user = models.ForeignKey(User, related_name=\"access_logs\", on_delete=models.SET_NULL, null=T/", "scope": "AccessEventLog", "scopeKind": "class", "description": "unavailable"}, {"name": "user = models.ForeignKey(User, related_name=\"access_permissions\", on_delete=models.CASCADE)", "scope": "AccessPermission", "scopeKind": "class", "description": "unavailable"}]}